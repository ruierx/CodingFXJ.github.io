{
    "version": "https://jsonfeed.org/version/1",
    "title": "CodingFXJ'Blog • All posts by \"扁平化\" tag",
    "description": "",
    "home_page_url": "https://CodingFXJ.github.io",
    "items": [
        {
            "id": "https://codingfxj.github.io/p/efc8f5d2.html",
            "url": "https://codingfxj.github.io/p/efc8f5d2.html",
            "title": "数组扁平化方案",
            "date_published": "2021-06-04T05:36:26.000Z",
            "content_html": "<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><h3 id=\"扁平化\"><a class=\"markdownIt-Anchor\" href=\"#扁平化\">#</a> 扁平化</h3>\n<h4 id=\"方法一\"><a class=\"markdownIt-Anchor\" href=\"#方法一\">#</a> 方法一</h4>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">arr3 = [<span class=\"number\">1</span>, [<span class=\"number\">2</span>, <span class=\"number\">4</span>, [<span class=\"number\">5</span>, <span class=\"number\">6</span>, <span class=\"number\">8</span>],</span><br><span class=\"line\">    [<span class=\"number\">7</span>]</span><br><span class=\"line\">], <span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">7</span>, <span class=\"number\">8</span>]</span><br><span class=\"line\"><span class=\"comment\">//reduce递归</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> flatten = <span class=\"function\">(<span class=\"params\">arr</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> arr.reduce(<span class=\"function\">(<span class=\"params\">pre, cur</span>) =&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> pre.concat(<span class=\"built_in\">Array</span>.isArray(cur) ? flatten(cur) : cur)</span><br><span class=\"line\">    &#125;, [])</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;flatten(arr3): &#x27;</span>, flatten(arr3));</span><br><span class=\"line\"><span class=\"comment\">//[1, 2, 4, 5, 6, 8, 7, 1, 2, 7, 8]</span></span><br></pre></td></tr></table></figure>\n<h4 id=\"方法二\"><a class=\"markdownIt-Anchor\" href=\"#方法二\">#</a> 方法二</h4>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//函数递归</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> res = []</span><br><span class=\"line\"><span class=\"keyword\">const</span> fn = <span class=\"function\">(<span class=\"params\">arr</span>) =&gt;</span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">for</span>(<span class=\"keyword\">let</span> i=<span class=\"number\">0</span>;i&lt;arr.length;i++)&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(<span class=\"built_in\">Array</span>.isArray(arr[i]))&#123;</span><br><span class=\"line\">            fn(arr[i])</span><br><span class=\"line\">        &#125;<span class=\"keyword\">else</span>&#123;</span><br><span class=\"line\">            res.push(arr[i])</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">fn[i]</span><br></pre></td></tr></table></figure>\n<h4 id=\"方法三\"><a class=\"markdownIt-Anchor\" href=\"#方法三\">#</a> 方法三</h4>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">flatten1</span>(<span class=\"params\">arr</span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> arr.toString().split(<span class=\"string\">&#x27;,&#x27;</span>).map(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">item</span>) </span>&#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"built_in\">Number</span>(item);</span><br><span class=\"line\">        &#125;)</span><br><span class=\"line\">    &#125;</span><br></pre></td></tr></table></figure>\n<h4 id=\"方法四\"><a class=\"markdownIt-Anchor\" href=\"#方法四\">#</a> 方法四</h4>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">flatten</span>(<span class=\"params\">arr</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> arr.join(<span class=\"string\">&#x27;,&#x27;</span>).split(<span class=\"string\">&#x27;,&#x27;</span>).map(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">item</span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"built_in\">parseInt</span>(item);</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h4 id=\"方法五\"><a class=\"markdownIt-Anchor\" href=\"#方法五\">#</a> 方法五</h4>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">flatten2</span>(<span class=\"params\">arr</span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">while</span> (arr.some(<span class=\"function\"><span class=\"params\">item</span> =&gt;</span> <span class=\"built_in\">Array</span>.isArray(item))) &#123;</span><br><span class=\"line\">            arr = [].concat(...arr);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> arr;</span><br><span class=\"line\">    &#125;</span><br></pre></td></tr></table></figure>\n<h4 id=\"方法六\"><a class=\"markdownIt-Anchor\" href=\"#方法六\">#</a> 方法六</h4>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">arr.flat(<span class=\"literal\">Infinity</span>)</span><br><span class=\"line\"><span class=\"keyword\">const</span> res3 = <span class=\"built_in\">JSON</span>.stringify(arr).replace(<span class=\"regexp\">/\\[|\\]/g</span>,<span class=\"string\">&#x27;&#x27;</span>).split(<span class=\"string\">&#x27;,&#x27;</span>)<span class=\"comment\">//会变字符串</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> res4 = <span class=\"built_in\">JSON</span>.parse(<span class=\"string\">&#x27;[&#x27;</span>+<span class=\"built_in\">JSON</span>.stringify(arr).replace(<span class=\"regexp\">/\\[|\\]/g</span>,<span class=\"string\">&#x27;&#x27;</span>)+<span class=\"string\">&#x27;]&#x27;</span>)</span><br></pre></td></tr></table></figure>\n<h3 id=\"题目一\"><a class=\"markdownIt-Anchor\" href=\"#题目一\">#</a> 题目一</h3>\n<p><strong>将数组扁平化并去除其中重复数据，最终得到一个升序且不重复的数组</strong></p>\n<blockquote>\n<p>arr = [ [1, 2, 2], [3, 4, 5, 5], [6, 7, 8, 9, [11, 12, [12, 13, [14] ] ] ], 10]</p>\n</blockquote>\n<h4 id=\"方法一-2\"><a class=\"markdownIt-Anchor\" href=\"#方法一-2\">#</a> 方法一</h4>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Array.from(new Set(arr.flat(Infinity))).sort((a,b)=&gt;&#123; return a-b&#125;)</span><br></pre></td></tr></table></figure>\n<h4 id=\"方法二-2\"><a class=\"markdownIt-Anchor\" href=\"#方法二-2\">#</a> 方法二</h4>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">arr.toString().split(&quot;,&quot;).sort((a,b)=&gt;&#123; return a-b&#125;).map(Number)</span><br></pre></td></tr></table></figure>\n<h4 id=\"方法三-2\"><a class=\"markdownIt-Anchor\" href=\"#方法三-2\">#</a> 方法三</h4>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> arr = [</span><br><span class=\"line\">           [<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">2</span>],</span><br><span class=\"line\">           [<span class=\"number\">3</span>, <span class=\"number\">4</span>, <span class=\"number\">5</span>, <span class=\"number\">5</span>], <span class=\"number\">111</span>, [<span class=\"number\">6</span>, <span class=\"number\">7</span>, <span class=\"number\">8</span>, <span class=\"number\">9</span>, [<span class=\"number\">11</span>, <span class=\"number\">12</span>, [<span class=\"number\">12</span>, <span class=\"number\">13</span>, [<span class=\"number\">14</span>]]]], <span class=\"number\">10</span></span><br><span class=\"line\">       ];</span><br><span class=\"line\"></span><br><span class=\"line\">       <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">flatten</span>(<span class=\"params\">arr</span>) </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">           <span class=\"keyword\">while</span> (arr.some(<span class=\"function\"><span class=\"params\">item</span> =&gt;</span> <span class=\"built_in\">Array</span>.isArray(item))) &#123;</span><br><span class=\"line\">               arr = [].concat(...arr);</span><br><span class=\"line\">           &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">           <span class=\"keyword\">return</span> arr;</span><br><span class=\"line\">       &#125;</span><br><span class=\"line\">       <span class=\"keyword\">var</span> arr2 = <span class=\"built_in\">Array</span>.from(<span class=\"keyword\">new</span> <span class=\"built_in\">Set</span>(flatten(arr))).sort(<span class=\"function\">(<span class=\"params\">a, b</span>) =&gt;</span> &#123;</span><br><span class=\"line\">           <span class=\"keyword\">return</span> a - b</span><br><span class=\"line\">       &#125;)</span><br></pre></td></tr></table></figure>\n<h4 id=\"方法四-2\"><a class=\"markdownIt-Anchor\" href=\"#方法四-2\">#</a> 方法四</h4>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">Array</span>.prototype.flat= <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> [].concat(...this.map(<span class=\"function\"><span class=\"params\">item</span> =&gt;</span> (<span class=\"built_in\">Array</span>.isArray(item) ? item.flat() : [item])));</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">Array</span>.prototype.unique = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> [...new <span class=\"built_in\">Set</span>(<span class=\"built_in\">this</span>)]</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> sortrule = <span class=\"function\">(<span class=\"params\">a, b</span>) =&gt;</span> a - b;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(arr.flat().unique().sort(sortrule)); <span class=\"comment\">// [ 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14 ]</span></span><br></pre></td></tr></table></figure>\n<h4 id=\"方法五-2\"><a class=\"markdownIt-Anchor\" href=\"#方法五-2\">#</a> 方法五</h4>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">var old_arr=[ [1, 2, 2], [3, 4, 5, 5], [6, 7, 8, 9, [11, 12, [12, 13, [14] ] ] ], 10];</span><br><span class=\"line\">\t\t</span><br><span class=\"line\">// 数组拍平</span><br><span class=\"line\">var level_arr=old_arr.flat(4);</span><br><span class=\"line\"></span><br><span class=\"line\">//数组去重</span><br><span class=\"line\">var Distinct=Array.from(new Set(level_arr));</span><br><span class=\"line\"></span><br><span class=\"line\">// 排序</span><br><span class=\"line\">var sort=  Distinct.sort((a, b) =&gt;a - b)</span><br><span class=\"line\"></span><br><span class=\"line\">console.log(&quot;new arr&quot;,sort)</span><br></pre></td></tr></table></figure>\n",
            "tags": [
                "JS",
                "数组",
                "扁平化"
            ]
        }
    ]
}